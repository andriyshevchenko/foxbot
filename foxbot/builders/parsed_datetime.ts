import { Query } from '../core'; export class ParsedDatetime implements Query<Date>{ constructor(private readonly txt:Query<string>){} async value(){ const s=(await this.txt.value()).toLowerCase(); const m=s.match(/(\d+)\s*(day|week|month|year)s?\s*ago/); if(!m) return new Date(); const n=parseInt(m[1],10); const u=m[2]; const d=new Date(); const day=24*60*60*1000; if(u==='day') d.setTime(d.getTime()-n*day); else if(u==='week') d.setTime(d.getTime()-n*7*day); else if(u==='month') d.setMonth(d.getMonth()-n); else if(u==='year') d.setFullYear(d.getFullYear()-n); return d; } }
