import { Action } from '../core'; import { Query } from '../core'; export interface Journal{ write(m:string,l:'debug'|'info'|'warn'|'error'):Promise<void>; } export class LoggedAction implements Action{ constructor(private readonly a:Action, private readonly m:Query<string>, private readonly j:Journal, private readonly l:'debug'|'info'|'warn'|'error'='debug'){} async perform(){ await this.j.write(await this.m.value(), this.l); await this.a.perform(); } }
